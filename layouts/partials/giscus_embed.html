{{- $repo := site.Params.giscus.repo | default (getenv "HUGO_PARAMS_GISCUS_REPO") | default "" -}}
{{- $repoId := site.Params.giscus.repo_id | default (getenv "HUGO_PARAMS_GISCUS_REPO_ID") | default "" -}}
{{- $category := site.Params.giscus.category | default (getenv "HUGO_PARAMS_GISCUS_CATEGORY") | default "" -}}
{{- $categoryId := site.Params.giscus.category_id | default (getenv "HUGO_PARAMS_GISCUS_CATEGORY_ID") | default "" -}}
{{- $mapping := site.Params.giscus.mapping | default (getenv "HUGO_PARAMS_GISCUS_MAPPING") | default "pathname" -}}
{{- if and $repo $repoId $category $categoryId -}}
<div class="vf-giscus">
  <script
    src="https://giscus.app/client.js"
    data-repo="{{ $repo }}"
    data-repo-id="{{ $repoId }}"
    data-category="{{ $category }}"
    data-category-id="{{ $categoryId }}"
    data-mapping="{{ $mapping }}"
    data-strict="1"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="en"
    crossorigin="anonymous"
    async>
  </script>
</div>
{{- end -}}
